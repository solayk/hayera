<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="AdminDAO">

	<select id="adminLogin" parameterType="admin" resultType="admin">
		<![CDATA[
		SELECT * FROM MANAGER WHERE MANAGER_ID = #{manager_id}
		]]>
	</select>

	<insert id="insertProduct" parameterType="product">
		<![CDATA[
		INSERT INTO PRODUCT(PROD_NO,PROD_NAME,BRAND,CATEGORY,PRICE,COST_PRICE,DISCOUNT_PRICE
		,CAPACITY,SCENT,SCENT_RATING,FEEL,FEEL_RATING,AVG_RATING,TOTALSALES,STOCK,IMG_URL,MANAGER_ID,PRODUCT_EXPLAIN) 
		VALUES (#{prod_no}, #{prod_name}, #{brand}, #{category}, #{price}, #{cost_price}, #{discount_price}
		, #{capacity}, #{scent}, 0, #{feel}, 0, 0, #{totalsales}, #{stock}, #{img_url}, 'admin', #{product_explain})
		]]>
	</insert>
	
	<select id="adminSearchProduct" parameterType="String" resultType="product">
		<![CDATA[
		SELECT * 
		FROM PRODUCT
		WHERE PROD_NAME LIKE '%'||#{value}||'%'
		]]>
	</select>
	
	<select id="adminEditTarget" parameterType="product" resultType="product">
		<![CDATA[
		SELECT * FROM PRODUCT WHERE PROD_NO = #{prod_no}
		]]>
	</select>
	
	<update id="adminEditProduct" parameterType="product">
		<![CDATA[
		UPDATE PRODUCT SET PROD_NAME = #{prod_name}, BRAND = #{brand}, CATEGORY = #{category}, PRICE = #{price}, COST_PRICE = #{cost_price}
		, DISCOUNT_PRICE = #{discount_price}, CAPACITY = #{capacity}, SCENT = #{scent}, FEEL = #{feel}, PRODUCT_EXPLAIN = #{product_explain} WHERE PROD_NO = #{prod_no}
		]]>
	</update>
	
	<delete id="adminRemoveProduct" parameterType="String">
		<![CDATA[
		DELETE 
		FROM PRODUCT
		WHERE PROD_NO = #{value}
		]]>
	</delete>
	
	<select id="viewAllCustomer" resultType="customer">
		<![CDATA[
		SELECT * FROM CUSTOMER
		]]>
	</select>
	
	<select id="adminCustomerEditTarget" parameterType="customer" resultType="customer">
		<![CDATA[
		SELECT * FROM CUSTOMER WHERE CUSTOMER_ID = #{customer_id}
		]]>
	</select>
	
	<update id="adminEditCustomer" parameterType="customer">
		<![CDATA[
		UPDATE CUSTOMER SET TEL = #{tel}, NAME = #{name}, EMAIL = #{email}, ADDRESS = #{address}, BIRTHDAY = #{birthday}, SKINTYPE = #{skintype}, POINTS = #{points}, GENDER = #{gender} WHERE CUSTOMER_ID = #{customer_id}
		]]>
	</update>
	
	<delete id="adminRemoveCustomer" parameterType="String">
		<![CDATA[
		DELETE 
		FROM CUSTOMER
		WHERE CUSTOMER_ID = #{value}
		]]>
	</delete>
	
	<select id="viewAllOrderlist" resultType="order">
		<![CDATA[
		SELECT * FROM ORDERLIST
		]]>
	</select>
	
	<select id="adminOrderEditTarget" parameterType="order" resultType="order">
		<![CDATA[
		SELECT * FROM ORDERLIST WHERE ORDER_NO = #{order_no}
		]]>
	</select>
	
	<update id="adminEditOrder" parameterType="order">
		<![CDATA[
		UPDATE ORDERLIST SET RECEIVE = #{receive}, ORDER_STATUS = #{order_status}, DELIVERY_DATE = #{delivery_date}, DELIVERY_STATUS = #{delivery_status}, ORDER_ADDRESS = #{order_address} WHERE ORDER_NO = #{order_no}
		]]>
	</update>
	
	<update id="adminEditDeliveryStatus" parameterType="order">
		<![CDATA[
		UPDATE ORDERLIST SET DELIVERY_DATE = SYSDATE, DELIVERY_STATUS = '발송완료' WHERE ORDER_NO = #{order_no}
		]]>
	</update>

</mapper>