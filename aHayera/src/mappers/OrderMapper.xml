<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 주문 테이블, 주문-제품 테이블 관련된 쿼리 짜볼거야 -->
<mapper namespace="OrderDAO">

<insert id="insertOrder" parameterType="order">
	<![CDATA[
	INSERT INTO orderlist 
	VALUES (#{order_no},#{customer_id},#{receive},#{order_address},sysdate,#{order_price},#{discount_price},0,#{payment_price},'결제완료',sysdate,'','배송준비')
	]]>
</insert>

<insert id="insertOrder_Product" parameterType="order_product">
	<![CDATA[
		INSERT INTO orderlist_product (prod_no, order_no, each_qty)
		VALUES (#{prod_no},#{order_no},#{each_qty})
	]]>
</insert>

<select id="orderHistoryView" resultType="order" parameterType="order">
	<![CDATA[
	SELECT ol.order_no, ol.customer_id, ol.receive, ol.order_address, ol.order_date, ol.order_price, ol.discount_price, ol.delivery_price, ol.payment_price,
		ol.order_status, ol.pay_date, ol.delivery_date, ol.delivery_status, op.prod_no, op.each_qty
	FROM orderlist ol INNER JOIN orderlist_product op
	ON ol.order_no=op.order_no
	WHERE ol.customer_id=#{customer_id}
	ORDER BY order_date DESC
	]]>
</select>
</mapper>